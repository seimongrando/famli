# ==============================================================================
# Famli - Configuração do Render (Infrastructure as Code)
# ==============================================================================
# Este arquivo permite configurar o deploy automaticamente no Render.
#
# Para usar:
#   1. Vá em https://dashboard.render.com/
#   2. Clique em "New" > "Blueprint"
#   3. Conecte seu repositório
#   4. O Render detectará este arquivo automaticamente
#
# Documentação: https://render.com/docs/blueprint-spec
# ==============================================================================

services:
  # ============================================================================
  # FAMLI - Web Service
  # ============================================================================
  - type: web
    name: famli
    runtime: go
    
    # Plano (free, starter, standard, pro)
    plan: free
    
    # Região (oregon, frankfurt, ohio, singapore)
    region: oregon
    
    # Branch para deploy
    branch: main
    
    # Comandos de build e start
    buildCommand: chmod +x ./scripts/render-build.sh && ./scripts/render-build.sh
    startCommand: chmod +x ./scripts/render-start.sh && ./scripts/render-start.sh
    
    # Health check
    healthCheckPath: /
    
    # Variáveis de ambiente
    envVars:
      # Ambiente
      - key: ENV
        value: production
      
      # Segredos (gerar valores aleatórios)
      - key: JWT_SECRET
        generateValue: true
      
      - key: ENCRYPTION_KEY
        generateValue: true
